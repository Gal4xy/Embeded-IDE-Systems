<!DOCTYPE HTML PUBLIC>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=GB2312">
</head>
<body>
<h1 align="center">源代码测试覆盖详细信息</h1>
<br>
<table align="center" border=0 width=70%>
	<tr Bgcolor=#F0F8FF>
	<td width="5%">行号</td>
	<td>代码</td>
    </tr>
<tr Bgcolor=#1E90FF><td>WHETS.C</td></tr><tr Bgcolor=#F8F8FF><td>0</td><td>/*********************************************************************** */</td></tr><tr Bgcolor=#F8F8FF><td>1</td><td>/*     Benchmark #2 -- Single Precision Whetstone (A001)                 */</td></tr><tr Bgcolor=#F8F8FF><td>2</td><td>/*                                                                       */</td></tr><tr Bgcolor=#F8F8FF><td>3</td><td>/*     o	This is a REAL*4 version of                              */</td></tr><tr Bgcolor=#F8F8FF><td>4</td><td>/*	the Whetstone benchmark program.                                 */</td></tr><tr Bgcolor=#F8F8FF><td>5</td><td>/*                                                                       */</td></tr><tr Bgcolor=#F8F8FF><td>6</td><td>/*     o	DO-loop semantics are ANSI-66 compatible.                */</td></tr><tr Bgcolor=#F8F8FF><td>7</td><td>/*                                                                       */</td></tr><tr Bgcolor=#F8F8FF><td>8</td><td>/*     o	Final measurements are to be made with all               */</td></tr><tr Bgcolor=#F8F8FF><td>9</td><td>/*	WRITE statements and FORMAT statements removed.                  */</td></tr><tr Bgcolor=#F8F8FF><td>10</td><td>/*                                                                       */</td></tr><tr Bgcolor=#F8F8FF><td>11</td><td>/*********************************************************************** */</td></tr><tr Bgcolor=#F8F8FF><td>12</td><td>#include <math.h></td></tr><tr Bgcolor=#F8F8FF><td>13</td><td>#include <stdio.h></td></tr><tr Bgcolor=#F8F8FF><td>14</td><td></td></tr><tr Bgcolor=#F8F8FF><td>15</td><td>#define CPU8051</td></tr><tr Bgcolor=#F8F8FF><td>16</td><td>/*  #define NOPRINT  */</td></tr><tr Bgcolor=#F8F8FF><td>17</td><td></td></tr><tr Bgcolor=#F8F8FF><td>18</td><td>#ifdef CPU8051</td></tr><tr Bgcolor=#F8F8FF><td>19</td><td>extern initserial ();</td></tr><tr Bgcolor=#F8F8FF><td>20</td><td>#define HZ  125   /* 125 Interrupt per Second for time function */</td></tr><tr Bgcolor=#F8F8FF><td>21</td><td>#else</td></tr><tr Bgcolor=#F8F8FF><td>22</td><td>#define HZ  1</td></tr><tr Bgcolor=#F8F8FF><td>23</td><td>#endif</td></tr><tr Bgcolor=#F8F8FF><td>24</td><td></td></tr><tr Bgcolor=#F8F8FF><td>25</td><td>extern long time (long *);</td></tr><tr Bgcolor=#F8F8FF><td>26</td><td></td></tr><tr Bgcolor=#F8F8FF><td>27</td><td>/* prototypes */</td></tr><tr Bgcolor=#F8F8FF><td>28</td><td>POUT(int N, int J, int K, float X1, float X2, float X3, float X4);</td></tr><tr Bgcolor=#F8F8FF><td>29</td><td>PA(float E[5]);</td></tr><tr Bgcolor=#F8F8FF><td>30</td><td>P0();</td></tr><tr Bgcolor=#F8F8FF><td>31</td><td>P3(float *X, float *Y, float *Z);</td></tr><tr Bgcolor=#F8F8FF><td>32</td><td></td></tr><tr Bgcolor=#F8F8FF><td>33</td><td>/*	IMPLICIT REAL*4 (A-H,O-Z); */</td></tr><tr Bgcolor=#F8F8FF><td>34</td><td></td></tr><tr Bgcolor=#F8F8FF><td>35</td><td>	float T,T1,T2,E1[5];</td></tr><tr Bgcolor=#F8F8FF><td>36</td><td>  int J,K,L;</td></tr><tr Bgcolor=#F8F8FF><td>37</td><td>	float X1,X2,X3,X4;</td></tr><tr Bgcolor=#F8F8FF><td>38</td><td>	long ptime,time0;</td></tr><tr Bgcolor=#F8F8FF><td>39</td><td></td></tr><tr Bgcolor=#F8F8FF><td>40</td><td>main () {</td></tr><tr Bgcolor=#F8F8FF><td>41</td><td>	int LOOP,I,II,JJ,N1,N2,N3,N4,N5,N6,N7,N8,N9,N10,N11;</td></tr><tr Bgcolor=#F8F8FF><td>42</td><td>	float X,Y,Z;</td></tr><tr Bgcolor=#F8F8FF><td>43</td><td>	long time1;</td></tr><tr Bgcolor=#F8F8FF><td>44</td><td></td></tr><tr Bgcolor=#F8F8FF><td>45</td><td>/*	Start benchmark timing at this point. */</td></tr><tr Bgcolor=#F8F8FF><td>46</td><td>#ifdef CPU8051</td></tr><tr Bgcolor=#F8F8FF><td>47</td><td>        initserial ();</td></tr><tr Bgcolor=#00FF99><td>48</td><td>#endif</td></tr><tr Bgcolor=#F8F8FF><td>49</td><td>	printf (" Benchmark #2 -- Single Precision Whetstone (A001)\n");</td></tr><tr Bgcolor=#00FF99><td>50</td><td>	time0 = time((long *) 0);</td></tr><tr Bgcolor=#00FF99><td>51</td><td>	ptime = time0;</td></tr><tr Bgcolor=#00FF99><td>52</td><td></td></tr><tr Bgcolor=#F8F8FF><td>53</td><td>/*	The actual benchmark starts here. */</td></tr><tr Bgcolor=#F8F8FF><td>54</td><td></td></tr><tr Bgcolor=#F8F8FF><td>55</td><td>	T = .499975;</td></tr><tr Bgcolor=#00FF99><td>56</td><td>	T1 = 0.50025;</td></tr><tr Bgcolor=#00FF99><td>57</td><td>	T2 = 2.0;</td></tr><tr Bgcolor=#00FF99><td>58</td><td></td></tr><tr Bgcolor=#F8F8FF><td>59</td><td>/*	With loopcount LOOP=10, one million Whetstone instructions */</td></tr><tr Bgcolor=#F8F8FF><td>60</td><td>/*	will be executed in EACH MAJOR LOOP..A MAJOR LOOP IS EXECUTED */</td></tr><tr Bgcolor=#F8F8FF><td>61</td><td>/*	'II' TIMES TO INCREASE WALL-CLOCK TIMING ACCURACY. */</td></tr><tr Bgcolor=#F8F8FF><td>62</td><td></td></tr><tr Bgcolor=#F8F8FF><td>63</td><td>	LOOP = 1;</td></tr><tr Bgcolor=#00FF99><td>64</td><td>	II   = 1;</td></tr><tr Bgcolor=#00FF99><td>65</td><td></td></tr><tr Bgcolor=#F8F8FF><td>66</td><td>	for (JJ=1;JJ<=II;JJ++) { /* DO 500 JJ=1,II; */</td></tr><tr Bgcolor=#FF6666><td>67</td><td></td></tr><tr Bgcolor=#F8F8FF><td>68</td><td>/*	Establish the relative loop counts of each module. */</td></tr><tr Bgcolor=#F8F8FF><td>69</td><td></td></tr><tr Bgcolor=#F8F8FF><td>70</td><td>	N1 = 0;</td></tr><tr Bgcolor=#00FF99><td>71</td><td>	N2 = 12 * LOOP;</td></tr><tr Bgcolor=#00FF99><td>72</td><td>	N3 = 14 * LOOP;</td></tr><tr Bgcolor=#00FF99><td>73</td><td>	N4 = 345 * LOOP;</td></tr><tr Bgcolor=#00FF99><td>74</td><td>	N5 = 0;</td></tr><tr Bgcolor=#00FF99><td>75</td><td>	N6 = 210 * LOOP;</td></tr><tr Bgcolor=#00FF99><td>76</td><td>	N7 = 32 * LOOP;</td></tr><tr Bgcolor=#00FF99><td>77</td><td>	N8 = 899 * LOOP;</td></tr><tr Bgcolor=#00FF99><td>78</td><td>	N9 = 616 * LOOP;</td></tr><tr Bgcolor=#00FF99><td>79</td><td>	N10 = 0;</td></tr><tr Bgcolor=#00FF99><td>80</td><td>	N11 = 93 * LOOP;</td></tr><tr Bgcolor=#00FF99><td>81</td><td></td></tr><tr Bgcolor=#F8F8FF><td>82</td><td>/*	Module 1: Simple identifiers */</td></tr><tr Bgcolor=#F8F8FF><td>83</td><td></td></tr><tr Bgcolor=#F8F8FF><td>84</td><td>	X1 = 1.0;</td></tr><tr Bgcolor=#00FF99><td>85</td><td>	X2 = -1.0;</td></tr><tr Bgcolor=#00FF99><td>86</td><td>	X3 = -1.0;</td></tr><tr Bgcolor=#00FF99><td>87</td><td>	X4 = -1.0;</td></tr><tr Bgcolor=#00FF99><td>88</td><td></td></tr><tr Bgcolor=#F8F8FF><td>89</td><td>	if (N1!=0) { /* GO TO 35; */</td></tr><tr Bgcolor=#00FF99><td>90</td><td>		for(I=1;I<=N1;I++) { /* DO 30 I=1,N1; */</td></tr><tr Bgcolor=#FF6666><td>91</td><td>		X1 = (X1 + X2 + X3 - X4)*T;</td></tr><tr Bgcolor=#FF6666><td>92</td><td>		X2 = (X1 + X2 - X3 + X4)*T;</td></tr><tr Bgcolor=#FF6666><td>93</td><td>		X3 = (X1 - X2 + X3 + X4)*T;</td></tr><tr Bgcolor=#FF6666><td>94</td><td>		X4 = (-X1 + X2 + X3 + X4)*T;</td></tr><tr Bgcolor=#FF6666><td>95</td><td>/* 30 */	};</td></tr><tr Bgcolor=#FF6666><td>96</td><td>/* 35 */	};</td></tr><tr Bgcolor=#F8F8FF><td>97</td><td></td></tr><tr Bgcolor=#F8F8FF><td>98</td><td>	if (JJ==II) POUT(N1,N1,N1,X1,X2,X3,X4);</td></tr><tr Bgcolor=#00FF99><td>99</td><td></td></tr><tr Bgcolor=#F8F8FF><td>100</td><td>/*	Module 2: Array elements */</td></tr><tr Bgcolor=#F8F8FF><td>101</td><td></td></tr><tr Bgcolor=#F8F8FF><td>102</td><td>	E1[1] = 1.0;</td></tr><tr Bgcolor=#00FF99><td>103</td><td>	E1[2] = -1.0;</td></tr><tr Bgcolor=#00FF99><td>104</td><td>	E1[3] = -1.0;</td></tr><tr Bgcolor=#00FF99><td>105</td><td>	E1[4] = -1.0;</td></tr><tr Bgcolor=#00FF99><td>106</td><td></td></tr><tr Bgcolor=#F8F8FF><td>107</td><td>	if (N2!=0) { /* GO TO 45; */</td></tr><tr Bgcolor=#00FF99><td>108</td><td>		for (I=1;I<=N2;I++) { /* DO 40 I=1,N2; */</td></tr><tr Bgcolor=#00FF99><td>109</td><td>		E1[1] = (E1[1] + E1[2] + E1[3] - E1[4])*T;</td></tr><tr Bgcolor=#00FF99><td>110</td><td>		E1[2] = (E1[1] + E1[2] - E1[3] + E1[4])*T;</td></tr><tr Bgcolor=#00FF99><td>111</td><td>		E1[3] = (E1[1] - E1[2] + E1[3] + E1[4])*T;</td></tr><tr Bgcolor=#00FF99><td>112</td><td>		E1[4] = (-E1[1] + E1[2] + E1[3] + E1[4])*T;</td></tr><tr Bgcolor=#00FF99><td>113</td><td>/* 40 */	};</td></tr><tr Bgcolor=#00FF99><td>114</td><td>/* 45 */	};</td></tr><tr Bgcolor=#F8F8FF><td>115</td><td></td></tr><tr Bgcolor=#F8F8FF><td>116</td><td>	if (JJ==II) POUT(N2,N3,N2,E1[1],E1[2],E1[3],E1[4]);</td></tr><tr Bgcolor=#00FF99><td>117</td><td></td></tr><tr Bgcolor=#F8F8FF><td>118</td><td>/*	Module 3: Array as parameter */</td></tr><tr Bgcolor=#F8F8FF><td>119</td><td></td></tr><tr Bgcolor=#F8F8FF><td>120</td><td>	if (N3!=0) { /* GO TO 59; */</td></tr><tr Bgcolor=#00FF99><td>121</td><td>		for (I=1;I<=N3;I++) { /* DO 50 I=1,N3; */</td></tr><tr Bgcolor=#00FF99><td>122</td><td>		PA(E1);</td></tr><tr Bgcolor=#00FF99><td>123</td><td>/* 50 */	};</td></tr><tr Bgcolor=#00FF99><td>124</td><td>/* 59 */	};</td></tr><tr Bgcolor=#F8F8FF><td>125</td><td></td></tr><tr Bgcolor=#F8F8FF><td>126</td><td>	if (JJ==II) POUT(N3,N2,N2,E1[1],E1[2],E1[3],E1[4]);</td></tr><tr Bgcolor=#00FF99><td>127</td><td></td></tr><tr Bgcolor=#F8F8FF><td>128</td><td>/*	Module 4: Conditional jumps */</td></tr><tr Bgcolor=#F8F8FF><td>129</td><td></td></tr><tr Bgcolor=#F8F8FF><td>130</td><td>	J = 1;</td></tr><tr Bgcolor=#00FF99><td>131</td><td>	if (N4!=0) { /* GO TO 65; */</td></tr><tr Bgcolor=#00FF99><td>132</td><td>		for (I=1;I<=N4;I++) { /* DO 60 I=1,N4; */</td></tr><tr Bgcolor=#00FF99><td>133</td><td>		if (J==1) goto L51;</td></tr><tr Bgcolor=#00FF99><td>134</td><td>		J = 3;</td></tr><tr Bgcolor=#00FF99><td>135</td><td>		goto L52;</td></tr><tr Bgcolor=#00FF99><td>136</td><td>L51:		J = 2;</td></tr><tr Bgcolor=#00FF99><td>137</td><td>L52:		if (J > 2) goto L53;</td></tr><tr Bgcolor=#00FF99><td>138</td><td>		J = 1;</td></tr><tr Bgcolor=#00FF99><td>139</td><td>		goto L54;</td></tr><tr Bgcolor=#00FF99><td>140</td><td>L53:		J = 0;</td></tr><tr Bgcolor=#00FF99><td>141</td><td>L54:		if (J < 1) goto L55;</td></tr><tr Bgcolor=#00FF99><td>142</td><td>		J = 0;</td></tr><tr Bgcolor=#00FF99><td>143</td><td>		goto L60;</td></tr><tr Bgcolor=#00FF99><td>144</td><td>L55:		J = 1;</td></tr><tr Bgcolor=#00FF99><td>145</td><td>L60:	;	};</td></tr><tr Bgcolor=#00FF99><td>146</td><td>/* 65 */	};</td></tr><tr Bgcolor=#F8F8FF><td>147</td><td></td></tr><tr Bgcolor=#F8F8FF><td>148</td><td>	if (JJ==II) POUT(N4,J,J,X1,X2,X3,X4);</td></tr><tr Bgcolor=#00FF99><td>149</td><td></td></tr><tr Bgcolor=#F8F8FF><td>150</td><td>/*	Module 5: Omitted */</td></tr><tr Bgcolor=#F8F8FF><td>151</td><td>/* 	Module 6: Integer arithmetic */</td></tr><tr Bgcolor=#F8F8FF><td>152</td><td></td></tr><tr Bgcolor=#F8F8FF><td>153</td><td>	J = 1;</td></tr><tr Bgcolor=#F8F8FF><td>154</td><td>	K = 2;</td></tr><tr Bgcolor=#F8F8FF><td>155</td><td>	L = 3;</td></tr><tr Bgcolor=#00FF99><td>156</td><td></td></tr><tr Bgcolor=#F8F8FF><td>157</td><td>	if (N6!=0) { /* GO TO 75; */</td></tr><tr Bgcolor=#00FF99><td>158</td><td>		for (I=1;I<=N6;I++) { /* DO 70 I=1,N6; */</td></tr><tr Bgcolor=#00FF99><td>159</td><td>		J = J * (K-J) * (L-K);</td></tr><tr Bgcolor=#00FF99><td>160</td><td>		K = L * K - (L-J) * K;</td></tr><tr Bgcolor=#00FF99><td>161</td><td>		L = (L - K) * (K + J);</td></tr><tr Bgcolor=#00FF99><td>162</td><td>		E1[L-1] = J + K + L;</td></tr><tr Bgcolor=#00FF99><td>163</td><td>		E1[K-1] = J * K * L;</td></tr><tr Bgcolor=#00FF99><td>164</td><td>/* 70 */	};</td></tr><tr Bgcolor=#00FF99><td>165</td><td>/* 75 */	};</td></tr><tr Bgcolor=#F8F8FF><td>166</td><td></td></tr><tr Bgcolor=#F8F8FF><td>167</td><td>	if (JJ==II) POUT(N6,J,K,E1[1],E1[2],E1[3],E1[4]);</td></tr><tr Bgcolor=#FF6666><td>168</td><td></td></tr><tr Bgcolor=#F8F8FF><td>169</td><td>/*	Module 7: Trigonometric functions */</td></tr><tr Bgcolor=#F8F8FF><td>170</td><td></td></tr><tr Bgcolor=#F8F8FF><td>171</td><td>	X = 0.5;</td></tr><tr Bgcolor=#FF6666><td>172</td><td>	Y = 0.5;</td></tr><tr Bgcolor=#FF6666><td>173</td><td></td></tr><tr Bgcolor=#F8F8FF><td>174</td><td>	if (N7!=0) { /* GO TO 85; */</td></tr><tr Bgcolor=#FF6666><td>175</td><td>		for (I=1;I<=N7;I++) { /* DO 80 I=1,N7; */</td></tr><tr Bgcolor=#FF6666><td>176</td><td>		X=T*atan(T2*sin(X)*cos(X)/(cos(X+Y)+cos(X-Y)-1.0));</td></tr><tr Bgcolor=#FF6666><td>177</td><td>		Y=T*atan(T2*sin(Y)*cos(Y)/(cos(X+Y)+cos(X-Y)-1.0));</td></tr><tr Bgcolor=#FF6666><td>178</td><td>/* 80 */	};</td></tr><tr Bgcolor=#FF6666><td>179</td><td>/* 85 */	};</td></tr><tr Bgcolor=#F8F8FF><td>180</td><td></td></tr><tr Bgcolor=#F8F8FF><td>181</td><td>	if (JJ==II) POUT(N7,J,K,X,X,Y,Y);</td></tr><tr Bgcolor=#FF6666><td>182</td><td></td></tr><tr Bgcolor=#F8F8FF><td>183</td><td>/*	Module 8: Procedure calls */</td></tr><tr Bgcolor=#F8F8FF><td>184</td><td></td></tr><tr Bgcolor=#F8F8FF><td>185</td><td>	X = 1.0;</td></tr><tr Bgcolor=#FF6666><td>186</td><td>	Y = 1.0;</td></tr><tr Bgcolor=#FF6666><td>187</td><td>	Z = 1.0;</td></tr><tr Bgcolor=#FF6666><td>188</td><td></td></tr><tr Bgcolor=#F8F8FF><td>189</td><td>	if (N8!=0) { /* GO TO 95; */</td></tr><tr Bgcolor=#FF6666><td>190</td><td>		for (I=1;I<=N8;I++) { /* DO 90 I=1,N8; */</td></tr><tr Bgcolor=#FF6666><td>191</td><td>		P3(&X,&Y,&Z); /* FORTRAN semantics */</td></tr><tr Bgcolor=#FF6666><td>192</td><td>/* 90 */	};</td></tr><tr Bgcolor=#FF6666><td>193</td><td>/* 95 */	};</td></tr><tr Bgcolor=#F8F8FF><td>194</td><td></td></tr><tr Bgcolor=#F8F8FF><td>195</td><td>	if (JJ==II) POUT(N8,J,K,X,Y,Z,Z);</td></tr><tr Bgcolor=#FF6666><td>196</td><td></td></tr><tr Bgcolor=#F8F8FF><td>197</td><td>/*	Module 9: Array references */</td></tr><tr Bgcolor=#F8F8FF><td>198</td><td></td></tr><tr Bgcolor=#F8F8FF><td>199</td><td>	J = 1;</td></tr><tr Bgcolor=#F8F8FF><td>200</td><td>	K = 2;</td></tr><tr Bgcolor=#F8F8FF><td>201</td><td>	L = 3;</td></tr><tr Bgcolor=#FF6666><td>202</td><td>	E1[1] = 1.0;</td></tr><tr Bgcolor=#FF6666><td>203</td><td>	E1[2] = 2.0;</td></tr><tr Bgcolor=#FF6666><td>204</td><td>	E1[3] = 3.0;</td></tr><tr Bgcolor=#FF6666><td>205</td><td></td></tr><tr Bgcolor=#F8F8FF><td>206</td><td>	if (N9!=0) { /* GO TO 105; */</td></tr><tr Bgcolor=#FF6666><td>207</td><td>		for (I=1;I<=N9;I++) { /* DO 100  I=1,N9; */</td></tr><tr Bgcolor=#FF6666><td>208</td><td>		P0();</td></tr><tr Bgcolor=#FF6666><td>209</td><td>/* 100 */	};</td></tr><tr Bgcolor=#FF6666><td>210</td><td>/* 105 */	};</td></tr><tr Bgcolor=#F8F8FF><td>211</td><td></td></tr><tr Bgcolor=#F8F8FF><td>212</td><td>	if (JJ==II) POUT(N9,J,K,E1[1],E1[2],E1[3],E1[4]);</td></tr><tr Bgcolor=#FF6666><td>213</td><td></td></tr><tr Bgcolor=#F8F8FF><td>214</td><td>/*	Module 10: Integer arithmetic */</td></tr><tr Bgcolor=#F8F8FF><td>215</td><td></td></tr><tr Bgcolor=#F8F8FF><td>216</td><td>	J = 2;</td></tr><tr Bgcolor=#FF6666><td>217</td><td>	K = 3;</td></tr><tr Bgcolor=#FF6666><td>218</td><td></td></tr><tr Bgcolor=#F8F8FF><td>219</td><td>	if (N10!=0) { /* GO TO 115; */</td></tr><tr Bgcolor=#FF6666><td>220</td><td>		for (I=1;I<=N10;I++) { /* DO 110 I=1,N10; */</td></tr><tr Bgcolor=#FF6666><td>221</td><td>		J = J + K;</td></tr><tr Bgcolor=#FF6666><td>222</td><td>		K = J + K;</td></tr><tr Bgcolor=#FF6666><td>223</td><td>		J = K - J;</td></tr><tr Bgcolor=#FF6666><td>224</td><td>		K = K - J - J;</td></tr><tr Bgcolor=#FF6666><td>225</td><td>/* 110 */	};</td></tr><tr Bgcolor=#FF6666><td>226</td><td>/* 115 */	};</td></tr><tr Bgcolor=#F8F8FF><td>227</td><td></td></tr><tr Bgcolor=#F8F8FF><td>228</td><td>	if (JJ==II) POUT(N10,J,K,X1,X2,X3,X4);</td></tr><tr Bgcolor=#FF6666><td>229</td><td></td></tr><tr Bgcolor=#F8F8FF><td>230</td><td>/*	Module 11: Standard functions */</td></tr><tr Bgcolor=#F8F8FF><td>231</td><td></td></tr><tr Bgcolor=#F8F8FF><td>232</td><td>	X = 0.75;</td></tr><tr Bgcolor=#FF6666><td>233</td><td></td></tr><tr Bgcolor=#F8F8FF><td>234</td><td>	if (N11!=0) { /* GO TO 125; */</td></tr><tr Bgcolor=#FF6666><td>235</td><td>		for (I=1;I<=N11;I++) { /* DO 120 I=1,N11; */</td></tr><tr Bgcolor=#FF6666><td>236</td><td>		X = sqrt(exp(log(X)/T1));</td></tr><tr Bgcolor=#FF6666><td>237</td><td>/* 120 */	};</td></tr><tr Bgcolor=#FF6666><td>238</td><td>/* 125 */	};</td></tr><tr Bgcolor=#F8F8FF><td>239</td><td></td></tr><tr Bgcolor=#F8F8FF><td>240</td><td>	if (JJ==II) POUT(N11,J,K,X,X,X,X);</td></tr><tr Bgcolor=#FF6666><td>241</td><td></td></tr><tr Bgcolor=#F8F8FF><td>242</td><td>/*      THIS IS THE END OF THE MAJOR LOOP. */</td></tr><tr Bgcolor=#F8F8FF><td>243</td><td></td></tr><tr Bgcolor=#F8F8FF><td>244</td><td>/* 500 */	};</td></tr><tr Bgcolor=#FF6666><td>245</td><td></td></tr><tr Bgcolor=#F8F8FF><td>246</td><td>/*      Stop benchmark timing at this point. */</td></tr><tr Bgcolor=#F8F8FF><td>247</td><td></td></tr><tr Bgcolor=#F8F8FF><td>248</td><td>	time1 = time((long *) 0);</td></tr><tr Bgcolor=#FF6666><td>249</td><td>/*---------------------------------------------------------------- */</td></tr><tr Bgcolor=#F8F8FF><td>250</td><td>/*      Performance in Whetstone KIP's per second is given by */</td></tr><tr Bgcolor=#F8F8FF><td>251</td><td></td></tr><tr Bgcolor=#F8F8FF><td>252</td><td>/*	(100*LOOP*II*HZ)/TIME */</td></tr><tr Bgcolor=#F8F8FF><td>253</td><td></td></tr><tr Bgcolor=#F8F8FF><td>254</td><td>/*      where TIME is in seconds. */</td></tr><tr Bgcolor=#F8F8FF><td>255</td><td>/*-------------------------------------------------------------------- */</td></tr><tr Bgcolor=#F8F8FF><td>256</td><td>	printf (" Single Whetstone KIPS %d\n",(int)((100*LOOP*II*HZ)/(time1-time0)));</td></tr><tr Bgcolor=#FF6666><td>257</td><td>#ifdef CPU8051</td></tr><tr Bgcolor=#F8F8FF><td>258</td><td>	while (1);</td></tr><tr Bgcolor=#FF6666><td>259</td><td>#else</td></tr><tr Bgcolor=#F8F8FF><td>260</td><td>        exit (0);</td></tr><tr Bgcolor=#F8F8FF><td>261</td><td>#endif</td></tr><tr Bgcolor=#F8F8FF><td>262</td><td>}	/* END; */</td></tr><tr Bgcolor=#FF6666><td>263</td><td></td></tr><tr Bgcolor=#F8F8FF><td>264</td><td>PA(E) float E[5]; { /* SUBROUTINE PA(E); */</td></tr><tr Bgcolor=#00FF99><td>265</td><td>/*	IMPLICIT REAL*4 (A-H,O-Z); */</td></tr><tr Bgcolor=#F8F8FF><td>266</td><td>/*	DIMENSION E(4); */</td></tr><tr Bgcolor=#F8F8FF><td>267</td><td>/*	COMMON T,T1,T2,E1(4),J,K,L; */</td></tr><tr Bgcolor=#F8F8FF><td>268</td><td>	int J1;</td></tr><tr Bgcolor=#F8F8FF><td>269</td><td>	J1 = 0;</td></tr><tr Bgcolor=#00FF99><td>270</td><td>L10:	E[1] = (E[1] + E[2] + E[3] - E[4]) * T;</td></tr><tr Bgcolor=#00FF99><td>271</td><td>	E[2] = (E[1] + E[2] - E[3] + E[4]) * T;</td></tr><tr Bgcolor=#00FF99><td>272</td><td>	E[3] = (E[1] - E[2] + E[3] + E[4]) * T;</td></tr><tr Bgcolor=#00FF99><td>273</td><td>	E[4] = (-E[1] + E[2] + E[3] + E[4]) / T2;</td></tr><tr Bgcolor=#00FF99><td>274</td><td>	J1 = J1 + 1;</td></tr><tr Bgcolor=#00FF99><td>275</td><td>	if ((J1 - 6) < 0) goto L10; /* 10,20,20; */</td></tr><tr Bgcolor=#00FF99><td>276</td><td></td></tr><tr Bgcolor=#F8F8FF><td>277</td><td>/* 20 */	return;</td></tr><tr Bgcolor=#F8F8FF><td>278</td><td>}	/* END; */</td></tr><tr Bgcolor=#00FF99><td>279</td><td></td></tr><tr Bgcolor=#F8F8FF><td>280</td><td>P0() { /* SUBROUTINE P0; */</td></tr><tr Bgcolor=#F8F8FF><td>281</td><td>/*	IMPLICIT REAL*4 (A-H,O-Z); */</td></tr><tr Bgcolor=#F8F8FF><td>282</td><td>/*	COMMON T,T1,T2,E1(4),J,K,L; */</td></tr><tr Bgcolor=#F8F8FF><td>283</td><td>	E1[J] = E1[K];</td></tr><tr Bgcolor=#FF6666><td>284</td><td>	E1[K] = E1[L];</td></tr><tr Bgcolor=#FF6666><td>285</td><td>	E1[L] = E1[J];</td></tr><tr Bgcolor=#FF6666><td>286</td><td>	return;</td></tr><tr Bgcolor=#F8F8FF><td>287</td><td>}	/* END; */</td></tr><tr Bgcolor=#FF6666><td>288</td><td></td></tr><tr Bgcolor=#F8F8FF><td>289</td><td>P3(X,Y,Z) float *X,*Y,*Z; { /* SUBROUTINE P3(X,Y,Z); */</td></tr><tr Bgcolor=#F8F8FF><td>290</td><td>/*	IMPLICIT REAL*4 (A-H,O-Z); */</td></tr><tr Bgcolor=#F8F8FF><td>291</td><td>/*	COMMON T,T1,T2,E1(4),J,K,L; */</td></tr><tr Bgcolor=#F8F8FF><td>292</td><td>	float Y1;</td></tr><tr Bgcolor=#F8F8FF><td>293</td><td>	X1 = *X;</td></tr><tr Bgcolor=#FF6666><td>294</td><td>	Y1 = *Y;</td></tr><tr Bgcolor=#FF6666><td>295</td><td>	X1 = T * (X1 + Y1);</td></tr><tr Bgcolor=#FF6666><td>296</td><td>	Y1 = T * (X1 + Y1);</td></tr><tr Bgcolor=#FF6666><td>297</td><td>	*Z = (X1 + Y1) / T2;</td></tr><tr Bgcolor=#FF6666><td>298</td><td>	return;</td></tr><tr Bgcolor=#F8F8FF><td>299</td><td>}	/* END; */</td></tr><tr Bgcolor=#FF6666><td>300</td><td></td></tr><tr Bgcolor=#F8F8FF><td>301</td><td>POUT(N,J,K,X1,X2,X3,X4) int N,J,K; float X1,X2,X3,X4; { /* SUBROUTINE POUT(N,J,K,X1,X2,X3,X4); */</td></tr><tr Bgcolor=#00FF99><td>302</td><td>/*	IMPLICIT REAL*4 (A-H,O-Z); */</td></tr><tr Bgcolor=#F8F8FF><td>303</td><td>/*	common/ptime/ptime,time0; */</td></tr><tr Bgcolor=#F8F8FF><td>304</td><td>	long time1;</td></tr><tr Bgcolor=#F8F8FF><td>305</td><td>	time1 = time((long *) 0);</td></tr><tr Bgcolor=#00FF99><td>306</td><td>#ifndef NOPRINT</td></tr><tr Bgcolor=#F8F8FF><td>307</td><td>	printf ("%3d%3d %7d%7d", (int)(time1-time0),(int)(time1-ptime),N,J);</td></tr><tr Bgcolor=#00FF99><td>308</td><td>        printf ("%7d%12.4g%12.4g" ,K,X1,X2);</td></tr><tr Bgcolor=#00FF99><td>309</td><td>        printf ("%12.4g%12.4g\n",X3,X4);</td></tr><tr Bgcolor=#00FF99><td>310</td><td>#endif</td></tr><tr Bgcolor=#F8F8FF><td>311</td><td>	ptime = time1;</td></tr><tr Bgcolor=#00FF99><td>312</td><td>	return;</td></tr><tr Bgcolor=#F8F8FF><td>313</td><td>}	/* END; */</td></tr></td></tr>

</table>
<br>
</body>
</html>
